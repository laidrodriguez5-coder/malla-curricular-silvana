<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Malla Curricular Interactiva</title>

<style>
    body {
        font-family: Arial;
        background: #f5f5f5;
        padding: 20px;
    }

    .materia {
        background: white;
        padding: 15px;
        margin-bottom: 10px;
        border-radius: 10px;
        border-left: 6px solid #5a5df0;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .materia.bloqueada {
        opacity: 0.4;
        border-left-color: gray;
    }

    .materia.aprobada {
        text-decoration: line-through;
        opacity: 0.6;
        border-left-color: green;
    }

    .nombre {
        font-weight: bold;
    }
</style>
</head>

<body>

<h1>Malla Curricular Interactiva - Silvana</h1>
<p>Marca lo que ya viste. Las materias se activan cuando cumples los prerrequisitos.</p>

<div id="malla"></div>

<script>

// ------- CONFIGURACIÓN DE TUS MATERIAS -------- //

// Puedes agregar, borrar o editar aquí sin saber programación.
// CODE FRIENDLY PARA TI ❤️

const materias = [
    { id: "ADM101", nombre: "Fundamentos de Administración", prerequisitos: [] },
    { id: "ECO101", nombre: "Economía I", prerequisitos: [] },
    { id: "MAT101", nombre: "Matemáticas I", prerequisitos: [] },

    { id: "ADM102", nombre: "Gestión Financiera", prerequisitos: ["ADM101"] },
    { id: "ECO102", nombre: "Economía II", prerequisitos: ["ECO101"] },
    { id: "MAT102", nombre: "Matemáticas II", prerequisitos: ["MAT101"] },

    { id: "MER201", nombre: "Fundamentos de Mercadeo", prerequisitos: ["ADM101"] }
];

// ---------------------------------------------- //


function renderMalla() {
    const malla = document.getElementById("malla");
    malla.innerHTML = "";

    materias.forEach(m => {
        const aprobadas = JSON.parse(localStorage.getItem("materiasAprobadas") || "[]");
        const isAprobada = aprobadas.includes(m.id);

        // Verificar prerequisitos
        const cumplePrereq = m.prerequisitos.every(p => aprobadas.includes(p));

        const div = document.createElement("div");
        div.className = "materia";

        if (!cumplePrereq && !isAprobada) div.classList.add("bloqueada");
        if (isAprobada) div.classList.add("aprobada");

        div.innerHTML = `
            <div>
                <div class="nombre">${m.id} - ${m.nombre}</div>
                <small>Prerrequisitos: ${m.prerequisitos.length ? m.prerequisitos.join(", ") : "Ninguno"}</small>
            </div>

            <input type="checkbox" ${isAprobada ? "checked" : ""} />
        `;

        div.querySelector("input").addEventListener("change", (e) => {
            let aprobadas = JSON.parse(localStorage.getItem("materiasAprobadas") || "[]");

            if (e.target.checked) {
                aprobadas.push(m.id);
            } else {
                aprobadas = aprobadas.filter(x => x !== m.id);
            }

            localStorage.setItem("materiasAprobadas", JSON.stringify(aprobadas));
            renderMalla();
        });

        malla.appendChild(div);
    });
}

renderMalla();

</script>

</body>
</html>
